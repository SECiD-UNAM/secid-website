---
export const prerender = false;

import ModernLayout from '../../../../layouts/ModernLayout.astro';
import Navigation from '../../../../components/Navigation.astro';
import Footer from '../../../../components/Footer.astro';
// @ts-ignore - ForumCategory component is excluded from tsconfig but needed at runtime
import ForumCategory from '../../../../components/forums/ForumCategory';
import { getLanguageFromUrl } from '../../../../i18n/translations';

const { slug } = Astro.params;
const language = getLanguageFromUrl(Astro.url);

// Check if user is authenticated (this would be replaced with actual auth logic)
const currentUser = undefined; // Replace with actual user from auth context

if (!slug) {
  return Astro.redirect('/es/forum');
}
---

<ModernLayout
  title={`${slug} - Foro - SECiD`}
  description={`CategorÃ­a ${slug} en el foro SECiD`}
  lang="es"
>
  <Navigation lang="es" />
  <ForumCategory
    categorySlug={slug}
    language={language}
    currentUser={currentUser}
    client:load
  />
  <Footer lang="es" />
</ModernLayout>
