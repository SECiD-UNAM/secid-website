---
import BaseLayout from '../../../../layouts/BaseLayout.astro';
import ForumTopic from '../../../../components/forums/ForumTopic';
import { getLanguageFromUrl } from '../../../../i18n/translations';

const { slug } = Astro.params;
const language = getLanguageFromUrl(Astro.url);

// Check if user is authenticated (this would be replaced with actual auth logic)
const currentUser = undefined; // Replace with actual user from auth context

if (!slug) {
  return Astro.redirect('/en/forum');
}
---

<BaseLayout
  title={`${slug} - Forum - SECiD`}
  description={`Discussion topic: ${slug}`}
>
  <ForumTopic
    topicSlug={slug}
    language={language}
    currentUser={currentUser}
    client:load
  />
</BaseLayout>
